{% load static %}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kayıt Ol | Reminder App</title>
    <!-- Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="icon" href="{% static 'images/reminder-icon.png' %}" type="image/x-icon" />
    <link rel="icon" href="{% static 'images/reminder-icon.png' %}" type="image/x-icon" />
    <link href="{% static 'reminder_app/css/auth-common.css' %}" rel="stylesheet" />
    <link href="{% static 'reminder_app/css/register.css' %}" rel="stylesheet" />
</head>
<body>
    <div class="rmd-blob rmd-blob1"></div>
    <div class="rmd-blob rmd-blob2"></div>
    <div class="rmd-blob rmd-blob3"></div>

    <header class="rmd-app-header">
        <img src="{% static 'images/reminder-icon.png' %}" alt="Reminder Icon">
        <span class="rmd-app-title">Reminder App</span>
    </header>

    <section class="rmd-section">
        <div class="rmd-card">
            <h3>Kayıt Ol</h3>

            {% if messages %}
            <div class="rmd-messages" aria-live="polite">
                {% for message in messages %}
                    <div class="rmd-message {% if message.tags %}{{ message.tags }}{% else %}info{% endif %}">{{ message }}</div>
                {% endfor %}
            </div>
            {% endif %}

            <form method="POST" action="{% url 'register' %}" novalidate id="rmd-register-form">
                {% csrf_token %}

                {% if form and form.non_field_errors %}
                  <div class="rmd-message error mb-2" role="alert">{{ form.non_field_errors }}</div>
                {% endif %}

                <div class="mb-3">
                    <label for="id_username" class="rmd-label">Kullanıcı Adı</label>
                    <input
                        type="text"
                        class="form-control rmd-input"
                        id="id_username"
                        name="username"
                        value="{{ form.username.value|default_if_none:'' }}"
                        required
                        autocomplete="username"
                        placeholder="kullanici_adiniz" />
                    {% if form and form.username.errors %}
                      <div class="invalid-feedback">{{ form.username.errors.0 }}</div>
                    {% endif %}
                </div>

                <div class="mb-3">
                    <label for="id_email" class="rmd-label">E-posta</label>
                    <input
                        type="email"
                        class="form-control rmd-input"
                        id="id_email"
                        name="email"
                        value="{{ form.email.value|default_if_none:'' }}"
                        required
                        autocomplete="email"
                        placeholder="ornek@mail.com" />
                    {% if form and form.email.errors %}
                      <div class="invalid-feedback">{{ form.email.errors.0 }}</div>
                    {% endif %}
                </div>

                <div class="mb-2 rmd-input-group">
                    <label for="id_password1" class="rmd-label">Şifre</label>
                    <input
                        type="password"
                        class="form-control rmd-input"
                        id="id_password1"
                        name="password1"
                        required
                        autocomplete="new-password"
                        placeholder="••••••••" />
                    <button type="button" class="rmd-toggle-btn" id="rmd-toggle-pw1" aria-label="Şifreyi göster">Göster</button>

                    <div class="rmd-strength" id="rmd-strength"><span></span></div>
                    <div class="rmd-hint" id="rmd-hint">En az 8 karakter, harf + rakam önerilir.</div>

                    {% if form and form.password1.errors %}
                      <div class="invalid-feedback">{{ form.password1.errors.0 }}</div>
                    {% endif %}
                </div>

                <div class="mb-3 rmd-input-group">
                    <label for="id_password2" class="rmd-label">Şifre (Tekrar)</label>
                    <input
                        type="password"
                        class="form-control rmd-input"
                        id="id_password2"
                        name="password2"
                        required
                        autocomplete="new-password"
                        placeholder="••••••••" />
                    <button type="button" class="rmd-toggle-btn" id="rmd-toggle-pw2" aria-label="Şifreyi göster">Göster</button>
                    <div class="invalid-feedback d-none" id="rmd-match-error">Şifreler eşleşmiyor.</div>

                    {% if form and form.password2.errors %}
                      <div class="invalid-feedback">{{ form.password2.errors.0 }}</div>
                    {% endif %}
                </div>

                <button type="submit" class="btn rmd-btn w-100" id="rmd-submit-btn">Kayıt Ol</button>

                <p class="rmd-meta">
                    Zaten hesabın var mı? <a href="{% url 'login' %}">Giriş Yap</a>
                </p>
            </form>
        </div>
    </section>

    <!-- Scripts -->
    <script src="{% static 'reminder_app/js/auth-common.js' %}"></script>
    <script src="{% static 'reminder_app/js/register.js' %}"></script>
</body>
</html>
